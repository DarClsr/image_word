<view class="container">
  <view class="card hero-card">
    <view class="row space-between">
      <text class="section-title">主题</text>
      <t-tag class="ai-tag" theme="primary" variant="light">AI 扩写</t-tag>
    </view>
    <t-input class="input" value="{{topic}}" placeholder="输入主题：如 春日校园海报" borderless bind:change="onTopicInput" />
    <text class="muted" style="margin-top: 6px; display: block;">建议 6-20 个字，描述主体+场景+风格</text>
  </view>

  <view class="section-title">风格</view>
  <scroll-view scroll-x class="style-scroll" show-scrollbar="false">
    <view class="style-list">
      <block wx:for="{{styles}}" wx:key="name">
        <view class="style-card {{item.selected ? 'selected' : ''}}" bindtap="onSelectStyle" data-name="{{item.name}}">
          <view class="style-cover"></view>
          <text class="style-name">{{item.name}}</text>
        </view>
      </block>
    </view>
  </scroll-view>
  <view class="row space-between" style="margin: 8px 0 0;">
    <text class="muted">更多风格</text>
    <text class="link" bindtap="goStyleLibrary">查看全部</text>
  </view>

  <view class="section-title">模型</view>
  <view class="card">
    <block wx:for="{{models}}" wx:key="name">
      <view class="row space-between model-item {{selectedModel === item.name ? 'selected' : ''}}" bindtap="onSelectModel" data-name="{{item.name}}">
        <view>
          <text>{{item.name}}</text>
          <view class="muted">{{item.desc}}</view>
        </view>
        <view>
          <text class="tag">{{item.price}}</text>
          <text class="tag">{{item.speed}}</text>
          <text class="tag">{{item.quality}}</text>
        </view>
      </view>
    </block>
  </view>

  <view class="section-title">高级设置</view>
  <view class="card">
    <picker mode="selector" range="{{ratios}}" range-key="label" value="{{ratioIndex}}" bindchange="onRatioChange">
      <view class="setting-row">
        <text class="setting-label">比例</text>
        <view class="picker-value">
          <text>{{ratios[ratioIndex].label}}</text>
          <text class="arrow">›</text>
        </view>
      </view>
    </picker>
    <picker mode="selector" range="{{counts}}" range-key="label" value="{{countIndex}}" bindchange="onCountChange">
      <view class="setting-row">
        <text class="setting-label">数量</text>
        <view class="picker-value">
          <text>{{counts[countIndex].label}}</text>
          <text class="arrow">›</text>
        </view>
      </view>
    </picker>
  </view>

  <view style="margin-top: 16px;">
    <t-button class="btn-primary" theme="primary" block bind:tap="goGenerating">立即生成</t-button>
  </view>
</view>
